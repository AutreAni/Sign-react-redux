(this["webpackJsonpusing-redux"]=this["webpackJsonpusing-redux"]||[]).push([[0],{21:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),s=n.n(c),o=(n(21),n(3)),i=n(13),l=n(1),u=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(l.jsxs)("div",{className:e.className+" inputField",children:[Object(l.jsx)(i.a,{className:"icon",icon:e.icon}),Object(l.jsx)("input",{name:e.name,type:e.inputType,placeholder:e.placeholder,onBlur:function(t){e.handleFocusout(t)},value:r,onChange:function(e){c(e.target.value)}}),e.errorMsg?Object(l.jsx)("span",{className:"error__msg",children:e.errorMsg}):null]})},d={Username:function(e){return!!e&&e.length},Password:function(e){return!(!(e.match(/[a-z]/g)&&e.match(/[A-Z]/g)&&e.match(/[0-9]/g))||e.length<8)},Email:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},ConfPass:function(e){return e===document.querySelector("input[name = Password]").value}},j="SAVE_CURRENT_USER",p="REMOVE_CURRENT_USER",m=n(4),b=n(7),h=(n(31),function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(o.a)(c,2),i=s[0],p=s[1],h=Object(a.useState)(!0),f=Object(o.a)(h,2),O=f[0],g=f[1],v=Object(a.useState)(!0),w=Object(o.a)(v,2),x=w[0],_=w[1],N=Object(a.useState)(!0),S=Object(o.a)(N,2),y=S[0],P=S[1],C=Object(a.useState)(!0),E=Object(o.a)(C,2),T=E[0],F=E[1],U=Object(a.useState)(),M=Object(o.a)(U,2),R=M[0],A=M[1],k=Object(a.useState)(!1),I=Object(o.a)(k,2),L=I[0],q=I[1],z="https://jsonplaceholder.typicode.com/users",B=Object(m.b)(),D={Username:g,Password:P,Email:_,ConfPass:F},J=function(e){if("INPUT"===e.target.tagName){var t=e.target.name;if(t){var n=d[t];i&&D[t](n(e.target.value))}}},W=function(e){B(function(e,t){return function(n){fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return n({type:j,payload:e})})).catch((function(e){return console.log(e)}))}}(e,z))},Z=function(e){var t="".concat(z,"?username=").concat(e.username,"&email=").concat(e.password);q(!0),fetch(t).then((function(e){if(200!==e.status)throw q(!1),new Error;return q(!1),A(null),e.json()})).then((function(e){if(!e.length)return q(!1),void A("Wrong username or password");q(!1),B(function(e){return{type:j,payload:e}}(e[0]))})).catch((function(e){q(!1),A("Server is not connected")}))};return Object(l.jsx)("div",{className:"sign__form",children:Object(l.jsx)("div",{className:"main__wrapper",children:Object(l.jsxs)("div",{className:"inner__wrapper",children:[Object(l.jsxs)("div",{className:"buttons__wrapper",children:[Object(l.jsx)("div",{className:n?"active btn__wrapper":"btn__wrapper",children:Object(l.jsx)("button",{className:"button",onClick:function(){!i&&n||(i&&p(!1),n||r(!0),A(null),g(!0),_(!0),F(!0),P(!0))},children:"Login"})}),Object(l.jsx)("div",{className:i?"active btn__wrapper":"btn__wrapper",children:Object(l.jsx)("button",{className:"button",onClick:function(){i&&!n||(i||p(!0),n&&r(!1),A(null),g(!0),_(!0),F(!0),P(!0))},children:"Sign Up"})})]}),Object(l.jsxs)("form",{id:"form",onSubmit:function(e){var t=e.target.closest("form");e.preventDefault();var a,r={};if(r.username=t.Username.value,r.email=i?t.Email.value:null,r.password=t.Password.value,r.confPass=i?t.ConfPass.value:null,n){if(!r.username.length||!r.password.length)return void A("*All fields are required");Z(r)}if(i){if(!(r.username.length&&r.password.length&&r.email.length&&r.confPass.length))return void A("*All fields are required");if(!(O&&x&&y&&T))return;a=r,q(!0),fetch("".concat(z,"?email=").concat(a.email)).then((function(e){return e.json()})).then((function(e){if(e.length)return q(!1),void A("An account with this email already exists");q(!1),A(null),W(a)})).catch((function(e){q(!1),A("Server is not connected")}))}},onFocus:function(e){if("INPUT"===e.target.tagName){var t=e.target.name;t&&(D[t](!0),A(null))}},children:[Object(l.jsx)(u,{className:"username__wrapper",name:"Username",icon:b.c,inputType:"text",placeholder:"Username",handleFocusout:J,errorMsg:!O&&i?"*Field can not be empty":null}),i?Object(l.jsx)(u,{className:"email__wrapper",name:"Email",icon:b.a,inputType:"email",placeholder:"Email",handleFocusout:J,errorMsg:x?null:"*Please, insert a valid email"}):null,Object(l.jsx)(u,{className:"password__wrapper",name:"Password",icon:b.b,inputType:"password",placeholder:"Password",handleFocusout:J,errorMsg:!y&&i?"*Password must be at least 8 characters, must contain a lowercase letter, an uppercase letter and a digit":null}),i?Object(l.jsx)(u,{className:"confirm__password__wrapper",name:"ConfPass",icon:b.b,inputType:"password",placeholder:"Confirm password",handleFocusout:J,errorMsg:T?null:"*Passwords should match"}):null,Object(l.jsxs)("div",{className:"sign__btn ".concat(!R&&!L&&(!i||O&&y&&x&&T)?"":"disabled"),children:[Object(l.jsx)("button",{children:i?"Register":"Log In"}),R?Object(l.jsx)("p",{className:"errorMsg",children:R}):null]})]})]})})})}),f=(n(32),function(){var e=Object(m.c)((function(e){return e.username})),t=Object(m.b)();return Object(l.jsxs)("div",{className:"popup-wrapper",children:[Object(l.jsxs)("h1",{children:["Welcome ",e]}),Object(l.jsx)("span",{onClick:function(){t({type:p})},children:"x"})]})});var O,g=function(){var e=Object(m.c)((function(e){return e}));return Object(l.jsx)("div",{className:"container",children:e?Object(l.jsx)(f,{}):Object(l.jsx)(h,{})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},w=n(15),x=n(16),_=n(9),N=n(5),S=(O={},Object(N.a)(O,j,(function(e,t){return t.payload})),Object(N.a)(O,p,(function(){return null})),O),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=S[t.type];return n?n(e,t):e},P=Object(_.createStore)(y,Object(w.composeWithDevTools)(Object(_.applyMiddleware)(x.a)));s.a.render(Object(l.jsx)(m.a,{store:P,children:Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(g,{})})}),document.getElementById("root")),v()}},[[33,1,2]]]);
//# sourceMappingURL=main.088a2327.chunk.js.map